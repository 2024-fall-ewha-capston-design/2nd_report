# Team-Info

| (1) 과제명            | 사용자가 채팅방마다 키워드를 등록하면 의미 기반 분석을 통해 맞춤형 알림 및 요주의 인물 표시 기능을 제공하는 AI기반 오픈채팅 서비스                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| :-------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| (2) 팀 번호 / 팀 이름 | 36/해피코더                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| (3) 팀 구성원         | 이승진 (2122045): 리더, FE, AI, UI디자인<br> 모수지 (2171012): 팀원, BE, AI, UI디자인                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| (4) 팀 지도교수       | 윤명국 교수님                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| (5) 과제 분류         | 산학과제                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| (6) 과제 키워드       | Chat GPT, 오픈채팅, 랭체인                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| (7) 과제 내용 요약    | 챗시피는 사용자가 채팅방마다 키워드를 등록하면 의미 기반 분석을 통해 맞춤형 알림 및 요주의 인물 표시 기능을 제공하는 AI기반 오픈채팅 서비스이다. 채팅방 생성, 대화 참여, 채팅방 찾기, 비공개/공개 채팅방 및 실명/익명 채팅방 기능 등의 기본적인 기능은 제공하며, 키워드 등록을 통해 각 채팅방마다 사용자의 관심 키워드와 부정적 키워드를 각각 최대 5개까지 입력할 수 있다. ChatGPT 기반의 분석을 통해 관심있는 키워드와 관련된 내용의 채팅이 올 경우 알림을 보내주어 사용자가 중요한 정보를 빠르게 확인할 수 있도록 한다. 등록된 부정적 키워드와 관련된 메시지를 보낸 사용자에게는 벌점이 부과되며 벌점 누적 상위 3명은 요주의 인물로 처리되어 이름이 빨간색으로 표시되는데, 이를 통해 불필요한 대화나 스트레스를 유발하는 사용자를 식별하고 관리할 수 있다. 서비스의 핵심은 FastAPI, LangChain, OpenAI API를 활용한 AI 분석으로, 사용자 맞춤형 알림과 필터링을 구현한다. 챗시피는 불필요한 정보 탐색 시간을 절약하고, 맞춤형 알림 및 필터링 기능을 통해 사용자의 편의성을 향상시키는 것을 목표로 한다. |

<br>

# Project-Summary

| 항목                  | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| :-------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| (1) 문제 정의         | 해당 서비스의 주요 타겟 고객은 오픈채팅방에서 정보 과부하로 불편함을 느낀 사용자들로, 원하는 정보만 빠르게 확인하고 불필요한 내용의 열람을 최소화하고자 하는 사람들이다. 특히 동아리, 스터디, 커뮤니티 채팅방 등에서 다양한 주제가 빠르게 오가는 대화 속에서 중요한 정보를 놓치거나, 혹시 중요한 내용이 있을까 하는 마음에 전체 내용을 다 읽느라 시간을 낭비한 경험이 있는 사용자들을 대상으로 한다. 이 서비스는 사용자가 효율적으로 필요한 정보만 선별할 수 있도록 돕는 것을 목표로 한다. <br>또한, 반복적으로 듣기 싫은 주제를 언급하는 특정 사용자들로 인해 스트레스를 받았던 사람들도 주요 타겟 고객이다. 해당 서비스는 벌점 부과와 요주의 인물 처리를 통해 이러한 문제를 완화하여, 오픈채팅방에서의 부정적인 경험을 줄이고 더 쾌적한 채팅 환경을 제공하고자 한다. <br> Pain Points는 다음과 같다. 첫번째는 정보 과부하로 인한 문제로, 빠른 속도로 다양한 주제의 대화가 오가는 그룹 채팅방에서는 중요한 정보를 놓치기 쉬우며 불필요한 정보를 걸러내지 못하면 채팅 확인에 많은 시간이 낭비될 수 있다. 두번째는 오픈채팅을 사용하면서 받는 스트레스와 불편함인데 오픈채팅에서 특정 사용자가 지속적으로 원하지 않는 주제를 반복적으로 언급할 경우, 이는 사용자의 스트레스를 유발하고 불편함을 초래할 수 있다. |
| (2) 기존연구와의 비교 | 카카오톡 오픈채팅은 키워드 설정을 통한 알림 기능을 제공하지만, 단순히 키워드 기반의 필터링에 그쳐 의미 기반 분석은 제공하지 않는다. 또한, 키워드 등록 시 전체 채팅방에 공통적으로 적용되어 채팅방마다 개별화된 키워드 등록이 불가능하며, 반복적으로 듣기 싫은 말을 하는 사용자를 식별할 수 있는 기능이 없다. 이와 비교해 챗시피는 키워드를 등록하면 ChatGPT 기반의 맥락 분석을 통해 알림을 제공하여, 단순한 키워드 필터링보다 훨씬 더 정교한 사용자 맞춤형 필터링을 제공한다. 또한, 각 채팅방에 대해 긍정적, 부정적 키워드를 각각 최대 5개씩 등록할 수 있어, 채팅방의 특성에 맞는 필터링을 설정할 수 있다. 뿐만 아니라 반복적으로 불쾌한 발언을 하는 사용자에게 벌점을 부과하고, 요주의 인물 처리를 통해 스트레스를 줄이며 더 쾌적한 채팅 환경을 제공한다.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| (3) 제안 내용         | 해당 서비스는 오픈채팅방에서의 정보 과부하와 스트레스로 인한 불편함을 해결하기 위해 두 가지 주요 기능을 제공한다. <br>첫번째는 사용자 맞춤 채팅 알림 기능이다. 이 기능은 사용자가 채팅방별로 관심 있는 키워드 5개를 등록할 수 있게 하며, ChatGPT 기반의 맥락 분석을 통해 메시지의 내용과 키워드의 일치 여부를 검토한다. 일치하는 경우, 해당 메시지를 사용자에게 알림으로 전달하여 중요한 정보를 빠르게 확인할 수 있도록 한다. 이를 통해 사용자는 오픈채팅방의 모든 대화를 읽지 않고도 필요한 정보만 신속하게 습득할 수 있다. <br>두 번째는 요주의 인물 처리 기능이다. 이 기능은 채팅방별로 부정적인 키워드 5개를 등록할 수 있게 하며, ChatGPT 기반의 맥락 분석을 통해 해당 키워드가 포함된 메시지를 보내는 사용자에게 벌점을 부과한다. 각 키워드는 스트레스 유발 정도에 따라 가중치를 다르게 설정할 수 있다. 벌점이 누적된 상위 3명의 사용자 이름은 빨간색으로 표시되어 요주의 인물로 식별되며, 이를 통해 반복적으로 불쾌하거나 듣기싫은 내용을 언급하는 사용자로부터 발생할 수 있는 심리적 불편을 줄여준다.                                                                                                                                                                                                   |
| (4) 기대효과 및 의의  | 첫째, 서비스 사용자는 등록된 키워드의 맥락 분석에 기반한 알림을 통해 중요한 정보를 신속하게 확인하고, 시간 낭비 없이 필요한 정보에 접근할 수 있다. <br>둘째, 요주의 인물 처리를 통해 반복적으로 원치 않는 주제를 언급하는 특정 사용자로부터 발생하는 심리적 불편함을 완화하여 사용자의 스트레스를 줄일 수 있다. <br>셋째, 채팅방별로 사용자가 등록한 데이터가 축적됨에 따라, 사용자들이 관심 있는 내용과 불쾌함을 느끼는 내용을 파악할 수 있다. 이를 통해 연령대별 사용자들의 관심사와 패턴을 학습하고, 추후에는 키워드 추천 기능이나 자동 등록 기능 등을 제공하여 더 편리한 알림 및 필터링 서비스를 제공할 수 있다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| (5) 주요 기능 리스트  | **1. 로그인 기능** : 구글 계정을 통해 서비스에 로그인할 수 있다.<br> **2. 오픈채팅 생성기능** : 사용자는 오픈채팅방을 생성할 수 있으며, 생성 시 공개/비공개 여부와 실명/익명 여부를 선택할 수 있다. <br> **3. 오픈채팅 찾기 기능** : 공개 채팅은 이름으로, 비공개 채팅은 코드를 통해 검색할 수 있다. <br> **4. 프로필 기능** : 기본 프로필을 등록할 수 있다. 익명 채팅방의 경우 채팅방마다 개별적인 익명 프로필을 생성하여 마이페이지에서 한 번에 확인하고 수정할 수 있다. <br> **5. 오픈채팅 대화기능**: 오픈채팅을 통해 다수와 실시간 대화가 가능하다. <br> **6. 방장 기능** : 채팅방 생성자는 방장이 되며, 방장 변경 및 방장 권한을 통해 채팅방을 삭제할 수 있다. <br> **7. 사용자 맞춤 채팅 알림 기능** : 사용자가 설정한 관심 키워드 5개에 해당하는 메시지가 오면 알림을 제공한다. <br> **8. 요주의 인물 처리 기능** : 사용자가 설정한 부정적 키워드 5개와 관련된 메시지를 보낸 사용자에게 벌점을 부과하고, 벌점 누적 상위 3명의 이름은 빨간색으로 표시하여 요주의 인물로 식별한다.                                                                                                                                                                                                                       |

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | **- 기능별 상세 요구사항**<br><img width="1373" alt="스크린샷 2025-03-27 오후 4 08 14" src="https://github.com/user-attachments/assets/f59e003e-03d2-4e8b-b788-0ae22efa23ec" /><br> **- 설계 모델(클래스 다이어그램)**<br> <img width="918" alt="스크린샷 2025-03-27 오후 3 39 58" src="https://github.com/user-attachments/assets/b74350dd-62ca-4459-a0f6-1ffeccf58dff" /><br> **- E-R 다이어그램/DB 설계 모델**<br>MySQL<img width="1565" alt="스크린샷 2025-03-27 오후 12 10 08" src="https://github.com/user-attachments/assets/a8e7cfd1-c991-41c2-a98f-855a9f8665a0" /><br>mongoDB<br><img width="714" alt="스크린샷 2025-03-27 오후 12 10 35 (1)" src="https://github.com/user-attachments/assets/550c168d-003b-4760-a970-be5707378dc8" /><br>**API 명세서**<br>https://ablaze-red-3e8.notion.site/API-162baddb3eb88003a5bcf8c75fc45f62
<br> |
| (2) 전체 시스템 구성 | <img width="965" alt="스크린샷 2025-03-28 오전 12 18 48" src="https://github.com/user-attachments/assets/42b25989-7c0f-4aec-91e1-9dbf7cb5646d" />|
| (3) 주요엔진 및 기능 설계 | **Spring Boot**<br>- Spring Boot: 백엔드 애플리케이션을 담당하며 다음과 같은 주요 기능을 제공한다.<br>- REST API : 클라이언트와의 통신을 위한 JSON 기반의 API 개발<br>- WebSocket 통신 : 실시간 메시지 전송을 위한 WebSocket 서버 역할 수행<br>- STOMP 프로토콜 지원 : 다중 사용자 메시징을 위한 STOMP 프로토콜 사용<br>- DB 연동 : MySQL과 MongoDB에 데이터를 저장 및 조회<br>- 외부 API 연동 : ChatGPT 및 LangChain을 활용하여 AI 응답 처리<br><br>**WebSocket**<br>실시간 데이터 교환을 위한 프로토콜로, HTTP와 다르게 지속적인 연결을 유지할 수 있다. 클라이언트가 서버에 WebSocket 요청을 보내면 ws:// 또는 wss:// 프로토콜을 통해 연결한다.<br><br>**STOMP**<br>메시징을 위한 규격을 제공하며, 클라이언트는 특정 주제 또는 큐를 구독할 수 있다.<br>RabbitMQ와 같은 메시지 브로커를 사용할 수도 있지만 현재는 Spring Boot의 내장 브로커를 사용하고 있다.<br><br>**AWS 인프라**<br>- EC2 : Spring Boot 및 데이터베이스 서버 실행을 위한 가상 서버로, 보안 그룹 설정을 통해 HTTP, HTTPS, WebSocket 트래픽을 관리하고 있다.<br>- S3 : 이미지 및 기타 정적 파일 저장소로 사용하고 있으며, 업로드된 파일을 URL 기반으로 접근 가능하도록 설정했다.<br><br>**GitHub Actions (CI/CD 자동 배포)**<br>main 브랜치에 푸시 성공 시 AWS CodeDeploy를 이용하여 프로젝트가 EC2 서버에 배포된다. 현재 Gradle을 사용하여 Spring Boot 프로젝트를 빌드 및 실행하고 있다.<br><br>**DB**<br>- MySQL : 회원 정보, 채팅방, 참여자 정보(Participant) 등 정형 데이터를 저장하고 있다.<br>- MongoDB : 채팅 메시지를 저장하는 데 사용하고 있으며, 이를 통해 채팅 메시지의 빠른 조회와 대량의 채팅 메시지에 대한 데이터 처리 효율을 향상시키고자 했다.<br><br>**Nginx**<br>클라이언트의 요청을 Spring Boot 서버로 전달하는 역할을 한다. 현재 WebSocket 요청도 정상적으로 처리할 수 있도록 프록시 설정을 해놓았다. <br><br>**ChatGPT & LangChain (AI 응답 처리)**<br>OpenAI의 ChatGPT-4 API를 호출하여 응답을 생성한다. LangChain을 활용하여 프롬프트 최적화 및 대화 상태를 유지하고 있으며, Spring Boot에서 FastAPI 기반의 ChatGPT 서버에 요청을 보내고 있다. |
| (4) 주요 기능의 구현 | **1. 오픈채팅 대화 기능**<br>Spring Boot에서 WebSocket을 활용하여 실시간 채팅 기능을 구현했으며, 메시지 라우팅과 전송을 위해 STOMP 프로토콜을 사용했다.<br>클라이언트는 WebSocket을 통해 서버와 연결되며, 특정 채팅방의 Topic을 구독하여 실시간으로 메시지를 수신하도록 했다.<br>채팅방 및 참여자 정보는 MySQL에 저장하고, 채팅 메시지는 MongoDB에 저장하여 성능을 최적화했다.<br>MongoDB는 대량 메시지 조회 성능을 고려하여 Indexed 저장 방식을 적용하였다.<br><br>**2. 사용자 맞춤 채팅 알림 기능**<br>사용자 맞춤 채팅 알림 기능은 LangChain을 활용한 프롬프트 엔지니어링과 ChatGPT API 연동을 통해 구현했다.<br>사용자가 사전에 관심 키워드를 설정하면, 채팅 메시지가 전송될 때 LangChain 기반의 프롬프트를 활용하여<br>ChatGPT가 메시지를 분석하고, 해당 키워드가 포함된 경우 REST API를 통해 사용자에게 알림을 전달하도록 했다.<br>메시지 분석은 LangChain을 통해 JSON 응답을 반환하는 방식으로 진행되며, Spring Boot의 비동기 이벤트 핸들러를 활용하여 알림 시스템과 연동되도록 했다.<br><br>**3. 요주의 인물 처리 기능**<br>요주의 인물 처리 기능은 부정 키워드 기반으로 악성 메시지를 감지하는 방식으로 구현했다.<br>사용자가 사전에 설정한 부정 키워드를 기준으로 ChatGPT가 채팅 메시지를 분석하고,부정적인 내용이 포함된 경우 해당 사용자에게 벌점을 부과하도록 했다.<br>벌점이 누적되면 상위 3명을 요주의 인물로 지정하고,프론트엔드에서 이들의 이름을 빨간색으로 표시하여 다른 사용자들이 경계할 수 있도록 했다.이러한 기능을 통해 채팅 환경을 보다 쾌적하게 유지할 수 있도록 설계했다. |
| (5) 기타 | *기타 사항을 기술*  |

<br>
